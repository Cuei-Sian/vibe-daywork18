<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Future 3C Store</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --metal-dark: #1a1a1a;
        --metal-gray: #2d2d2d;
        --metal-light: #b5b5b5;
        --accent-rust: #c46f3b; /* é½æ©˜ */
        --accent-steel: #6f7c85; /* é‡‘å±¬é‹¼éµä¸­ç° */
      }

      body {
        background-color: var(--metal-dark);
        color: var(--metal-light);
        font-family: "Roboto", sans-serif;
        padding: 40px 20px;
        background-image: linear-gradient(
            rgba(0, 0, 0, 0.65),
            rgba(0, 0, 0, 0.65)
          ),
          url("https://images.unsplash.com/photo-1488229297570-58520851e868?q=80&w=1200&auto=format"); /* å·¥æ¥­é¢¨èƒŒæ™¯é‹¼æ¿ */
        background-size: cover;
        background-attachment: fixed;
      }

      .container {
        max-width: 1000px;
        margin: 0 auto;
      }

      header {
        text-align: center;
        margin-bottom: 40px;
        padding-bottom: 20px;
        border-bottom: 2px solid #444;
      }

      h1 {
        font-family: "Orbitron", sans-serif;
        color: var(--metal-light);
        text-shadow: 0 0 5px #000;
        letter-spacing: 1px;
        margin: 0;
        font-weight: 700;
      }

      /* å‰¯æ¨™æ–‡å­— */
      p {
        color: #999;
        margin-top: 8px;
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 25px;
      }

      /* å¡ç‰‡ï¼šé‹¼æ¿é‡‘å±¬æ„Ÿ */
      .card {
        background: var(--metal-gray);
        border: 2px solid #3a3a3a;
        border-radius: 8px;
        overflow: hidden;
        position: relative;
        transition: transform 0.25s, border-color 0.25s, box-shadow 0.25s;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
      }

      .card:hover {
        transform: translateY(-5px);
        border-color: var(--accent-rust);
        box-shadow: 0 0 12px rgba(196, 111, 59, 0.6);
      }

      /* åœ–ç‰‡å¸¶æš—è§’ */
      .card-img {
        width: 100%;
        height: 200px;
        object-fit: cover;
        background: #222;
        filter: brightness(0.9);
      }

      /* æ¨™ç±¤ï¼šæ›¿æ›ç‚ºé‡‘å±¬éŠ˜ç‰Œé¢¨æ ¼ */
      .tag {
        position: absolute;
        top: 10px;
        right: 10px;
        background: var(--accent-rust);
        color: #fff;
        padding: 4px 12px;
        border-radius: 4px;
        font-weight: bold;
        font-size: 0.8rem;
        box-shadow: 0 0 6px rgba(0, 0, 0, 0.5);
      }

      .card-info {
        padding: 15px;
      }

      .card-title {
        margin: 0 0 10px;
        font-size: 1.1rem;
        font-weight: 500;
        color: var(--metal-light);
      }

      /* åƒ¹æ ¼ â†’ é‡‘å±¬éŠ˜åˆ»å­—é«” */
      .card-price {
        font-family: "Orbitron", sans-serif;
        font-size: 1.4rem;
        color: var(--accent-rust);
        font-weight: 700;
      }

      /* è¼‰å…¥ä¸­è¨Šæ¯ */
      .msg-box {
        text-align: center;
        padding: 40px;
        border: 2px dashed #555;
        border-radius: 10px;
        grid-column: 1 / -1;
        color: #aaa;
        background: rgba(40, 40, 40, 0.6);
      }

      /* ç¯©é¸å€ */
      .filter-bar {
        margin-bottom: 30px;
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        align-items: center;
      }

      .filter-label {
        color: #aaa;
        font-size: 0.9rem;
      }

      /* å·¥æ¥­æŒ‰éˆ•ï¼šé‹¼æ¿ + é‰šé‡˜æ„Ÿ */
      .filter-btn {
        padding: 8px 16px;
        border: 2px solid #555;
        background: #2a2a2a;
        color: #ddd;
        border-radius: 6px;
        cursor: pointer;
        font-size: 0.85rem;
        transition: all 0.25s;
        box-shadow: inset 0 0 4px rgba(0, 0, 0, 0.4);
      }

      .filter-btn:hover {
        border-color: var(--accent-rust);
        background: #3a3a3a;
      }

      .filter-btn.active {
        background: var(--accent-rust);
        color: #fff;
        border-color: var(--accent-rust);
        font-weight: bold;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <header>
        <h1>è„†è„†çš„ 3C é¤¨</h1>
      </header>

      <div class="filter-bar">
        <span class="filter-label">åƒ¹æ ¼ç¯©é¸ï¼š</span>
        <button class="filter-btn active" data-filter="all">å…¨éƒ¨é¡¯ç¤º</button>
        <button class="filter-btn" data-filter="low">$10,000 ä»¥ä¸‹</button>
        <button class="filter-btn" data-filter="mid">$10,000 - $30,000</button>
        <button class="filter-btn" data-filter="high">$30,000 ä»¥ä¸Š</button>
      </div>

      <div id="app" class="grid">
        <div class="msg-box">
          <h2>â³ å€‰åº«é€£ç·šä¸­...</h2>
          <p>å¦‚æœå¾ˆä¹…æ²’åæ‡‰ï¼Œè«‹æª¢æŸ¥ä½ çš„ CSV ç¶²å€æ˜¯å¦æ­£ç¢º</p>
        </div>
      </div>
    </div>

    <script>
      // ==========================================
      // ğŸ‘‡ ä»»å‹™å€åŸŸï¼šè«‹å°‡ä½ çš„ Google Sheet CSV ç¶²å€è²¼åœ¨ä¸‹é¢ ğŸ‘‡
      // ==========================================
      const CSV_URL =
        "https://docs.google.com/spreadsheets/d/e/2PACX-1vRaYcUXnHaTiyKdQ0518hLltrUlJrD8RLIWyChEB7o7NbI_m3rG4h2OwiE6rUMrtPSPT-QSxZaSTzww/pub?output=csv";
      // === æ ¸å¿ƒç¨‹å¼ç¢¼ (è² è²¬æŠŠè³‡æ–™ç•«å‡ºä¾†) ===
      const app = document.getElementById("app");
      let allData = []; // å„²å­˜æ‰€æœ‰è³‡æ–™
      let currentFilter = "all"; // ç›®å‰çš„ç¯©é¸æ¢ä»¶
      function init() {
        if (CSV_URL.includes("ä½ çš„_CSV_ç¶²å€")) {
          console.warn("é‚„æ²’è¨­å®šç¶²å€å–”ï¼");
          return;
        }
        Papa.parse(CSV_URL, {
          download: true,
          header: true,
          complete: function (results) {
            console.log("CSV è¼‰å…¥æˆåŠŸï¼è³‡æ–™ç­†æ•¸:", results.data.length);
            console.log("ç¬¬ä¸€ç­†è³‡æ–™:", results.data[0]);
            allData = results.data;
            renderCards(allData);
            setupFilterButtons();
          },
          error: function (error) {
            console.error("è¼‰å…¥éŒ¯èª¤:", error);
            app.innerHTML =
              '<div class="msg-box" style="color:#ff4444; border-color:#ff4444"><h2>âŒ é€£ç·šå¤±æ•—</h2><p>è«‹ç¢ºèªç¶²å€æ ¼å¼æ˜¯å¦ç‚º CSV</p><p>éŒ¯èª¤è¨Šæ¯: ' +
              error.message +
              "</p></div>";
          },
        });
      }
      // è¨­å®šç¯©é¸æŒ‰éˆ•çš„é»æ“Šäº‹ä»¶
      function setupFilterButtons() {
        const filterBtns = document.querySelectorAll(".filter-btn");
        filterBtns.forEach((btn) => {
          btn.addEventListener("click", function () {
            // ç§»é™¤æ‰€æœ‰æŒ‰éˆ•çš„ active æ¨£å¼
            filterBtns.forEach((b) => b.classList.remove("active"));
            // åŠ ä¸Šç•¶å‰æŒ‰éˆ•çš„ active æ¨£å¼
            this.classList.add("active");
            // å–å¾—ç¯©é¸æ¢ä»¶
            currentFilter = this.dataset.filter;
            filterAndRender();
          });
        });
      }
      // æ ¹æ“šç¯©é¸æ¢ä»¶éæ¿¾ä¸¦é¡¯ç¤ºè³‡æ–™
      function filterAndRender() {
        let filteredData = allData;
        if (currentFilter !== "all") {
          filteredData = allData.filter((item) => {
            const price = parseFloat(item.price || item["price "]) || 0;
            switch (currentFilter) {
              case "low":
                return price < 10000;
              case "mid":
                return price >= 10000 && price <= 30000;
              case "high":
                return price > 30000;
              default:
                return true;
            }
          });
        }
        renderCards(filteredData);
      }

      function renderCards(data) {
        app.innerHTML = ""; // æ¸…é™¤è¼‰å…¥è¨Šæ¯
        // å¦‚æœæ²’æœ‰è³‡æ–™ï¼Œé¡¯ç¤ºæç¤ºè¨Šæ¯
        if (data.length === 0 || (data.length === 1 && !data[0].name)) {
          app.innerHTML =
            '<div class="msg-box"><h2>ğŸ˜… æ‰¾ä¸åˆ°ç¬¦åˆæ¢ä»¶çš„å•†å“</h2><p>è©¦è©¦å…¶ä»–åƒ¹æ ¼ç¯„åœå§ï¼</p></div>';
          return;
        }
        data.forEach((item, index) => {
          // é™¤éŒ¯ï¼šçœ‹çœ‹å¯¦éš›çš„æ¬„ä½åç¨±
          if (index === 0) {
            console.log("æ‰€æœ‰æ¬„ä½åç¨±:", Object.keys(item));
            console.log("å®Œæ•´è³‡æ–™:", item);
          }
          // å–å¾—æ¬„ä½è³‡æ–™ï¼ˆè™•ç†å¯èƒ½çš„ç©ºæ ¼å•é¡Œï¼‰
          const name = item.name || item["name"];
          const price = item.price || item["price "] || item["price"];
          const tags = item.tags || item["tags"];
          console.log(
            `å•†å“ ${index}: name=${name}, price=${price}, tags=${tags}`
          );
          // ç¢ºä¿è‡³å°‘æœ‰å•†å“åç¨±
          if (!name) return;
          // è™•ç†åœ–ç‰‡ï¼šå¦‚æœæ²’å¡«åœ–ç‰‡ï¼Œç”¨é è¨­åœ–ç¤ºä»£æ›¿
          const img =
            item.image_url ||
            "https://images.unsplash.com/photo-1468495244123-6c6c332eeece?w=400&q=80";
          // è™•ç†åƒ¹æ ¼ï¼šç¢ºä¿è½‰æ›ç‚ºæ•¸å­—
          const priceNum = parseFloat(price) || 0;
          const priceDisplay = priceNum.toLocaleString();
          // è™•ç†æ¨™ç±¤ï¼šåˆ†å‰²æ¨™ç±¤ï¼ˆå¯èƒ½æ˜¯é€—è™Ÿåˆ†éš”ï¼‰
          const tagText = tags ? tags.split(",")[0].trim() : "";
          const tagHtml = tagText ? `<span class="tag">${tagText}</span>` : "";
          // ç”¢ç”Ÿå¡ç‰‡ HTML
          const html = `
        <div class="card">
          ${tagHtml}
          <img src="${img}" class="card-img">
          <div class="card-info">
            <h3 class="card-title">${name}</h3>
            <span class="card-price">$${priceDisplay}</span>
          </div>
        </div>
      `;
          app.innerHTML += html;
        });
      }
      init();
    </script>
  </body>
</html>
